---
layout: single
title: "《OKKYCON: 2018  The Real TDD - TDD 제대로 알기》"
categories: 
  - 프로그래밍
tags:
  - TDD
---

[출처 : 오키콘 2018](https://okky.kr/article/538114)

### 1. 정진욱님 - 테스트하기 쉬운 코드로 개발하기 
[링크](https://youtu.be/Cz_a2gQp63c)

테스트하기 쉬운 코드란?
1. 같은 입력에 같은 결과를 반환하는 코드
2. 외부상태를 변경하지 않는 코드 (no side effect)

반대로 테스트하기 어려운 것은 위 2가지 항목에 외부모듈에 의존하는 코드라고 할 수 있다.
(ex. DB에서 정보를 가져와야 할때 등.)

테스트 하기 어려운 코드를 테스트 하려면.
1. 테스트하기 쉬운 코드와 어려운 코드를 분리한다.
  * 테스트하기 어렵다는건, 테스트하기 위해 데이터를 준비하거나 사전작업이 많다는 것.
  * 혹은, 복잡한 코드.
2. 두 부류의 코드는 최대한 가장자리에서 만나도록 합니다. (예외. 로깅, 퍼사드 패턴 등)
  * 테스트하기 어려운 코드와 쉬운코드의 depth를 조정하여 쉬운코드는 쉬운코드끼리, 여려운건 따로 분할하여 만나게 합니다.
3. 두 부류가 만날때의 테스트하는 방법을 익히자.
  * 수동 테스트를 해본다.
  * 실제 클래스 대신 Mock을 사용하여 이음새(Seam)을 이어준다.
    * Mock : 구현체를 대신할 모의 객체
    * Seam : interface를 사용하여 이어주는 방식.
    * 인터페이스로 통신하게 하여 모의객체로 그 실제 동작을 임의로 처리하도록 하는 방식.
    * 다만, Mock을 사용한다는 것은 고민이 필요하다.
      * Mock을 사용하는것은 행위에 대한검증 (실제값이아닌, 어떤 함수를 잘 호출 했는지를 검증하는 것)
      * 테스트만을 위한 Mocking이 오버코딩이 아닌지 고민이 필요. (불필요한 추상화))
      * 반대로 값을 검증하는 것은, 상태검증.

[발표자의 자료](http://jwchung.github.io/testing-oh-my)

QnA
* private method의 테스트는 어떻게?
  * 테스트 만을 위해 접근권한을 열면 되려 유연성을 잃게 된다. 무엇을 위해 열지에 대한 고민이 우선.
* legacy code에 대한 테스트는?
  * 최대한 legacy code와 접촉면을 줄여서, 새로 생성된 코드에 대한 테스트위주로.
  * legacy의 경우는 외적으로 예상되는 in-out put을 테스트로 작성한 후에 리펙토링을 하는 관점.
    * 다만,, legacy는 한도끝도 없다.

### 2. 박재성님 - 의식적인 연습으로 TDD, 리팩토링 연습하기
[링크](https://youtu.be/cVxqrGHxutU)

의식적인 연습을 통한 효과적인 TDD와 리펙토링의 연습과정.

연습을 통해 테스트하기 쉬운코드와 어려운코드를 보는 눈.
어려운 코드를 테스트하기 쉽게 설계하는 감각을 키워야.

의식적인 연습 >> 1만시간의 연습. 김창준 주장. 등.
1. 컴포트존을 깨는 연습이 필요하다. 편안함에 대한 안주하지 않도록, 현재 능력을 약간 넘어가는 업무를 수행하도록.
2. 명확하고 구체적인 목표를 가지고 연습해야.
3. 피드백과 피드백에 따른 행동 변경을 수반해야.
4. 기존에 습득한 기술의 특정 부분을 집중적으로 개선함으로써 발전, 수정하는 과정.
  * 너무 많은 것을 하려하지 않도록.

TDD를 하기 위해.
* 1단계 단위 테스트 연습.
  * 라이브러리나 api에 대한 사용방법에 대한 단위 테스트를 추가하여 사용 방법을 학습하기.
  * xunit에 대한 연습.
* 2단계 TDD 연습.
  * toy project로 시작. 외부환경과 의존관계를 갖지 않는. (DB, server. 등)
    * 계산기 라던지 등등.
  * 우선 실패하는 테스트 > 성공하는 테스트 사이클 먼저 (리펙토링은 나중에)
  * 익숙하고 쉬운 코드부터 시작하기.
* 3단계 리펙토링 연습 (결국 읽기좋은 코드로 만들기. 문맥/맥락을 이해하기 쉽게, 추상화하기.)
 * 첫번째. 메소드 분리 연습.
  * 들여쓰기를 1단계 까지만 허용하기. (그 이상은 리펙토링 요소.)
  * else 예약어를 사용하지 않도록 하기.
  * 메소드가 한가지 일만 하도록 하기.
  * compose method pattern : 함수의 의도가 잘 드러나도록 동등한 수준의 작업을 여러단계로 다듬는다.
  * 극단적으로 연습을 해야 인사이트가 생긴다. 하던대로 안해야.
 * 두번째. 클래스 분리 연습.
  * 모든 원시값과 문자열을 포장하기.
    * 순수한 int,string을 포장하는 클래스를 만들기. 해당 동작을 보장하는.
  * 일급 콜렉션을 쓰기.
    * 콜렉션을 클래스로 레핑.
  * 3개 이상의 인스턴스 변수를 만들지 않는다.
* 4단계 고급 toy project 작성하기. (난이도를 높이기)
  * 요구사항이 명확한 프로젝트
* 5단계 외부 의존관계가 있는 프로젝트로 연습하기.

[추천서적 : 소트웍스 앤솔러지](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=3273852)
[추천서적 : 클린 코드](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=34083680)

QnA
* 컴포트 존을 극복하려면?
 * 삶에 여유가 있어야. 시간에도 여유가 있어야. 고도의 스트레스가 있는 활동이라 여유가 없으면 어려움.
 * 일정기간동안 내시간을 들여서 고통스럽겠지만 연습해야한다.
* 

### 3. 한성곤님 - 코드 품질을 위한 테스트 주도 개발
[링크](https://youtu.be/dC2NIjTsH8E)

### 4. 이혜승님 - 테알못 신입은 어떻게 테스트를 시작했을까?
[링크](https://youtu.be/1bTIMHsUeIk)

### 5. 양완수님 - 테스트를 돌보기 위한 매우 간단한 실천 방법들, 그리고 효과
[링크](https://youtu.be/KXxPzokPpbc)

### 6. 이규원님 - 당신들의 TDD가 실패하는 이유
[링크](https://youtu.be/UttzAcbuk5k)

### 7. 패널토의 및 Q&A
[링크](https://youtu.be/Fal7o_BdaJk)
